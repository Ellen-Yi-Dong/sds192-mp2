---
title: "Mini-Project 2"
author: "Ellen Dong and Christina Hung"
date: "2019-03-24"
output: 
  html_document:
    code_folding: hide
---


## Loading the data

This project is so interesting and relevant to my life!  

```{r, message = FALSE}
library(tidyverse)
library(dplyr)
library(ggplot2)
library(RColorBrewer)
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
```

```{r, message = FALSE}
## Filtering and Grouping the Contributions and House Elections Tables

ca_house_elections <- house_elections %>%
  filter(state == "CA") %>%
  select(state, incumbent, primary_votes, fec_id)

ca_contributions <- contributions %>%
  filter(state == "CA") %>%
  filter(transaction_amt > 0) %>%
  select(state, transaction_amt, cand_id) %>%
  mutate(fec_id = cand_id) %>%
  filter(!is.na(fec_id))
```

```{r, message = FALSE} 
## Joining the Contributions and House Elections Tables

contributions_helections <- ca_house_elections %>% 
 full_join(ca_contributions, by = "fec_id")

```

```{r, message = FALSE}

#Filtering out the NA in the joined table 

contributions_helections %>%
  filter(!is.na(state.y)) %>%
  filter(!is.na(transaction_amt)) %>%
  filter(!is.na(cand_id)) %>%
  filter(!is.na(incumbent))
```

```{r, message = FALSE, warning = FALSE}

#Trying to separate incumbent by TRUE and FALSE

ggplot(contributions_helections, aes(x = primary_votes, y = transaction_amt)) + 
  geom_point(aes(color = incumbent)) + 
  scale_fill_manual(values=c("FALSE" = "black", "TRUE" = "red")) + 
  xlim(0, 90000) +
  ylim(0,400000 ) + 
  labs(color = "Incumbent Status", 
         x = "Number of Primary Votes", 
         y = "Transaction Amount", 
         title = "How Primary Votes affect Transaction Amount in Candidates in CA", 
         subtitle = "With Respect to Incumbency"
         )
```


```{r}

state_he <- function(x){
  house_elections  %>% 
    filter(state == x) %>%
    select(state, incumbent, primary_votes, fec_id)}


state_he(x="MA")

```

```{r}
state_contributions <- function(x) {
  contributions %>%
    filter(state == x) %>%
    filter(transaction_amt > 0) %>%
    select(state, transaction_amt, cand_id) %>%
    mutate(fec_id = cand_id) %>%
    filter(!is.na(fec_id))
}
state_contributions(x = "MA")
```


ca_house_elections <- house_elections %>%
  filter(state == "CA") %>%
  select(state, incumbent, primary_votes, fec_id)

ca_contributions <- contributions %>%
  filter(state == "CA") %>%
  filter(transaction_amt > 0) %>%
  select(state, transaction_amt, cand_id) %>%
  mutate(fec_id = cand_id) %>%
  filter(!is.na(fec_id))
```





=======
**Sources**

+ [Cambridge Dictionary](https://dictionary.cambridge.org/us/dictionary/english/incumbency
)
+ [Congressional Elections](https://courses.lumenlearning.com/boundless-politicalscience/chapter/congressional-elections/)
+ [The Hazards of Incumbency:
An Event History Analysis of Congressional Tenure](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.595.2136&rep=rep1&type=pdf)
+ [Systemic Consequences of Incumbency Advantage in the U.S. House](https://gking.harvard.edu/files/abs/sysconseq-abs.shtml)
+ [Primary Election](https://ballotpedia.org/Primary_election)


> Word count: `r wordcountaddin::word_count()`

